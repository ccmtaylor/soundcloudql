<!DOCTYPE html>
<html>
    <head>
  <script src="//cdn.jsdelivr.net/fetch/0.9.0/fetch.min.js"></script>
  <script src="//cdn.jsdelivr.net/react/0.14.7/react.min.js"></script>
  <script src="//cdn.jsdelivr.net/react/0.14.7/react-dom.min.js"></script>
  <script src="//cdn.jsdelivr.net/graphiql/0.4.9/graphiql.min.js"></script>
  <script src="Search.js" ></script>
  <style type="text/css">
   .searchBox {
       width: 33%;
       margin: 1em auto;
   }
   .searchBox>input {
       width: 100%;
       font: 32pt sans-serif;
   }
   .resultList>div {
       float: left;
       width: 33%;
       border: 1px grey;
   }
  </style>
</head>
<body>
  <div id="content">loading...</div>
  <script>

    // Defines a GraphQL fetcher using the fetch API.
    function graphQLFetcher(graphQLParams) {
      return fetch('/graphql', {
        method: 'post',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(graphQLParams),
        credentials: 'include',
      }).then(function (response) {
        return response.text();
      }).then(function (responseBody) {
        try {
          return JSON.parse(responseBody);
        } catch (error) {
          return responseBody;
        }
      });
    }

   React.render(
       React.createElement(Search, {"fetcher": graphQLFetcher}),
       document.getElementById('content')
   );
  </script>
</html>
